<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>


<record id="view_product_image_form" model="ir.ui.view">
    <field name="model">product.image</field>
    <field name="inherit_id"
           ref="product_image.view_product_image_form" />
    <field name="arch" type="xml" >
        <xpath expr="//group[@name='link']" position="after">
            <field name="product_id" invisible="1"/>
            <group name="magento">
                <field name="magento_bind_ids" nolabel="1">
                    <tree name="magento_img_storeview"
                          editable="bottom">
                        <field name="backend_id" string="Backend"/>
                    </tree>
                </field>
            </group>
        </xpath>
    </field>
</record>


<record id="magento_product_img_form_view" model="ir.ui.view">
    <field name="model">magento.product.product</field>
    <field name="priority">30</field>
    <field name="arch" type="xml">
        <form version="7.0" string="_">
            <separator string="Magento images"/>
            <field name="backend_id" invisible="True"/>
            <field name="openerp_id" invisible="True"/>
            <field name="magento_product_image_ids">
                <tree editable="bottom">
                    <field name="product_id"/>
                    <field name="label"/>
                    <field name="sequence"/>
                    <field name="name"/>
                    <field name="extension" string="ext."/>
                    <field name="magento_id"/>
                    <field name="file" widget="image"/>
                </tree>
            </field>
            <separator string="Magento storeviews"/>
            <field name="magento_product_storeview_ids">
                <tree editable="bottom">
                    <field name="image"
                           domain="[('backend_id', '=', parent.backend_id), ('product_id', '=', parent.openerp_id)]"/>
                    <field name="small_image"
                           domain="[('backend_id', '=', parent.backend_id), ('product_id', '=', parent.openerp_id)]"/>
                    <field name="thumbnail"
                           domain="[('backend_id', '=', parent.backend_id), ('product_id', '=', parent.openerp_id)]"/>
                    <field name="storeview_id"
                           domain="[('backend_id', '=', parent.backend_id)]"/>
                    <field name="exclude_ids"
                           widget="many2many_tags"
                           domain="[('backend_id', '=', parent.backend_id), ('product_id', '=', parent.openerp_id)]"/>
                </tree>
            </field>
        </form>
    </field>
</record>

<record id="product_normal_form_view" model="ir.ui.view">
    <field name="model">product.product</field>
    <field name="inherit_id"
           ref="magentoerpconnect.product_normal_form_view"/>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='magento_bind_ids']/tree/field[@name='backend_id']"
               position="before">
            <button string="Images management" type="object"
                    name="open_images" icon="stock_gantt"/>
        </xpath>
    </field>
</record>

    </data>
</openerp>
